(()=>{"use strict";const t={aglaonema:12.99,aloe:5.25,fern:10.25,cactus:8.25,monstera:18,peacelily:8.75,sansevieria:5.75},e={"simple-clay":3,"decorated-clay":4,"simple-clay-painted":4,"decorated-clay-painted":5,"simple-ceramic":5,"decorated-ceramic":6,"ceramic-painted":6,"decorated-ceramic-painted":7},n={composted:3.25,fertilized:5,drainage:5.5},o={"moss-pole":2.25,pebbles:2,"mini-plants":3.75};function i(t){return t.charAt(0).toUpperCase()+t.slice(1)}document.addEventListener("DOMContentLoaded",(function(){const s=JSON.parse(localStorage.getItem("productPlants"));async function a(t,e){const n=`https://qfble0gquj.execute-api.us-east-2.amazonaws.com/plant-store/inventory/${t}/${e}`,o=await fetch(n);return(await o.json()).stock}s&&(document.getElementById("plant-image").src=`./Assets/plant-${s.plant}.png`,document.getElementById("pot-image").src=`./Assets/pots/${s.pot}.png`,document.getElementById("soil-image").src=`./Assets/soil-${s.soil}.png`,document.getElementById("extras-image").src=s.extras?`./Assets/${s.extras}.png`:"",document.getElementById("plant-name").textContent=i(s.plant),document.getElementById("soil-type").textContent={drainage:"Drainage Soil",composted:"Composted Soil",fertilized:"Fertilized Soil"}[s.soil],document.getElementById("pot-description").textContent=function(t){const e=t.split("-");let n="";return"decorated"===e[0]?n+=i(e[1])+" pot with decorations":n+=i(e[1])+" pot simple",n}(s.pot),document.getElementById("pot-color").textContent=s.pot.split("-").slice(-1)[0],document.getElementById("extras-list").textContent=s.extras);const l=JSON.parse(localStorage.getItem("productPlants"));!async function(t){const e=document.getElementById("inventory-alert-message"),n=function(t){const e=t.split("-");return 3===e.length?`${e[1]}-${e[0]}-${e[2]}`:t}(t.pot),o=document.querySelector("#accordions-container details:nth-child(2) p");let i="",s=!1,l=!1;const c=await a("plant",t.plant);0===c?(i+=`${p(t.plant)} is out of stock. Please select a different plant.<br>`,s=!0):c<10&&(i+=`${p(t.plant)}: Only ${c} items left in stock!<br>`,l=!0);const r=await a("pot",n);0===r?(i+=`${m(t.pot)} is out of stock. Please select a different pot.<br>`,s=!0):r<10&&(i+=`${m(t.pot)}: Only ${r} items left in stock!<br>`,l=!0);const d=await a("soil",t.soil);function p(t){return t.charAt(0).toUpperCase()+t.slice(1)}function m(t){return t.split("-").map((t=>p(t))).join(" ")}0===d?(i+=`${p(t.soil)} soil is out of stock. Please select a different soil.<br>`,s=!0):d<10&&(i+=`${p(t.soil)} soil: Only ${d} items left in stock!<br>`,l=!0),""===i&&(i="All items in your order are in stock."),o.innerHTML=i,s?(e.innerHTML="One of the items in your order is out of stock. Please check the inventory alerts.",e.className="stock-out"):l?(e.innerHTML="One of the items in your order has limited stock. Order soon!",e.className="stock-limited"):(e.innerHTML="In Stock",e.className="stock-in")}(l),function(i){const s=document.getElementById("price-breakdown"),a=document.getElementById("total-price"),l=function(i){let s=0;console.log(`Plant: ${i.plant} - Price: ${t[i.plant]}`),s+=t[i.plant];const a=i.pot.split("-"),l=a[0],c=a[1],r=a[2];let d=`${l}-${c}`;return r&&"unpainted"!==r&&(d+="-painted"),console.log(`Pot: ${d} - Price: ${e[d]}`),s+=e[d],console.log(`Soil: ${i.soil} - Price: ${n[i.soil]}`),s+=n[i.soil],i.extras&&(console.log(`Extra: ${i.extras} - Price: ${o[i.extras]}`),s+=o[i.extras]),s}(i);let c="<ul>";c+=`<li>Plant (${t[i.plant]}): ${i.plant}</li>`;const r=i.pot.split("-"),d=r[0],p=r[1],m=r[2];let u=`${d}-${p}`;m&&"unpainted"!==m&&(u+="-painted"),c+=`<li>Pot (${e[u]}): ${u}</li>`,c+=`<li>Soil (${n[i.soil]}): ${i.soil}</li>`,i.extras&&(c+=`<li>Extras (${o[i.extras]}): ${i.extras}</li>`),c+="</ul>",s.innerHTML=c,a.innerHTML=`Total: $${l.toFixed(2)}`,document.getElementById("price-total").textContent=`$${l}`}(l);const c=document.querySelectorAll("details");c.forEach((t=>{t.addEventListener("toggle",(e=>{t.open&&c.forEach((e=>{e!==t&&e.removeAttribute("open")}))}))})),async function(t){const e=await async function(t){try{const e=await fetch(`https://qfble0gquj.execute-api.us-east-2.amazonaws.com/plant-store/info/${t}`);return await e.json()}catch(t){return console.error("Error fetching plant info:",t),null}}(t);e?(document.querySelector("#accordions-container details:nth-child(3) p").textContent=e.description,document.getElementById("light-text").textContent=e.care.light,document.getElementById("water-text").textContent=e.care.water,document.getElementById("humidity-text").textContent=e.care.humidity,document.getElementById("temperature-text").textContent=e.care.temperature):console.error("Failed to retrieve plant info")}(s.plant.replace(/-\s/g,""))})),document.getElementById("back-to-customization").addEventListener("click",(function(){window.location.href="customization.html"}))})();